var gnSettings={BaseUrl:"https://www.gpsnose.com",BaseDataUrl:"https://gpsnose.blob.core.windows.net",ImagePath:"/Content/Mashup/Images",MashupsPageSize:12,NosesPageSize:12,NewsPageSize:12,PhotoBlogsPageSize:10,PoisPageSize:12,ToursPageSize:12,EventsPageSize:12,CommentsPageSize:12,CommunityMembersPageSize:12,NearbyPageSize:50,MashupTokensPageSize:12};function MaWaitForLogin(t,n,a,r){0<a&&(new Date).getTime()>a?r&&r():$.ajax({type:"POST",url:t,cache:!1,dataType:"json",success:function(e){e.IsOk?""==n?document.location.reload():window.location.replace(n):window.setTimeout(function(){MaWaitForLogin(t,n,a,r)},3500)},error:function(){window.setTimeout(function(){MaWaitForLogin(t,n,a,r)},3500)}})}function SwitchLanguage(e){var t,n=jQuery('form:has(div:first[role!="dialog"])')[0];null==n||"get"==n.method.toLowerCase()?(t=GetLangUrl(window.location.href,e),window.location.href=t):(jQuery(n).append('<input type="hidden" name="langSwitch" value="true" />'),t=GetLangUrl(n.action,e),n.action=t,n.submit())}function GetLangUrl(e,t){var n=GetArgsFromUrl(e);return null==n.lang&&n.push("lang"),n.lang=t,GetUrlFromArgs(e,n)}function GetCurrentLang(){var e=GetCookie("lang");return null==e||e.length<2?"en":e.substring(0,2)}function GetArgsFromUrl(e){var t=[],n=e.indexOf("?")+1;if(0<n)for(var a=e.slice(n).split("&"),r=0;r<a.length;r++){var o=a[r].split("="),i=decodeURIComponent(o[0]),o=decodeURIComponent(o[1]);t.push(i),t[i]=o}return t}function GetUrlFromArgs(e,t){var n=-1==e.indexOf("?")?e:e.substring(0,e.indexOf("?"));if(-1!=e.indexOf("#")&&(n=n.substring(0,n.indexOf("#"))),0!=t.length){n+="?";for(var a=0;a<t.length;a++){var r=t[a],o=t[r];0<a&&(n+="&"),n+=encodeURIComponent(r),null!=o&&(n+="="+encodeURIComponent(o))}}return n}function GetTimeZoneName(){var e=(new Date).toString();return/(.())\((.*)\)(.*)/g.exec(e)[3]}function GetTimeZoneOffsetMinutes(){return(new Date).getTimezoneOffset()}function GetDateStringFromTicks(e){if("0"==e||null==e)return"";e=new BigNumber(e);return moment(parseInt(e.subtract(621355968e9).divide(1e4).valueOf())).format("LLL")}function GetTicksFromDate(e){return new BigNumber(e.getTime()?e.getTime():0).multiply(1e4).add(621355968e9).valueOf()}function GetDateFromTicks(e){e=new BigNumber(e);return moment.utc(parseInt(e.subtract(621355968e9).divide(1e4).valueOf())).toDate()}function GetAgeStringFromTicks(e){if("0"==e)return"";var e=new BigNumber(e),e=moment(parseInt(e.subtract(621355968e9).divide(1e4).valueOf())),t=moment.duration(moment().diff(e));return 30<t.asDays()?e.format("l"):1<t.asDays()?Math.floor(t.asDays())+"d":1<t.asHours()?Math.floor(t.asHours())+"h":1<t.asMinutes()?Math.floor(t.asMinutes())+"min":(t.asSeconds()<0?0:Math.floor(t.asSeconds()))+"s"}function GetAgeString(e,t,n,a){e=new BigNumber(e),t=new BigNumber(t);return 0<e.compare(t)?GetAgeStringFromSecond(0,n,a):GetAgeStringFromSecond(moment.duration(parseInt(t.subtract(e.valueOf()).divide(1e4).valueOf())).asSeconds(),n,a)}function GetAgeStringFromSecond(e,t,n){var a=Math.floor(e/3600),r=Math.floor(e%3600/60),o=Math.floor(e%3600%60);return 0==a&&0==r?(t?"+":"")+Math.floor(e)+"s":(t?"+":"")+(a<10?"0":"")+a+":"+(r<10?"0":"")+r+(n?":"+(o<10?"0":"")+o:"")}function GetLoginNameFromUniqueKey(e){return e?e.split("_")[0]:null}function GetTicksFromUniqueKey(e){if(e){e=e.split("_")[1];if(e&&0<e.length)return new BigNumber(window.MAX_DATE_TIME_TICKS).subtract(e).valueOf()}return"0"}function GetUniqueKey(e,t){var n,a;return null!=t?(n=new BigNumber(window.MAX_DATE_TIME_TICKS),a=new BigNumber("string"==typeof t?t:GetTicksFromDate(t)),e+"_"+n.subtract(a.valueOf()).valueOf()):e+"_"+t}function SetCookieDays(e,t,n){SetCookieMinutes(e,t,24*n*60)}function SetCookieMinutes(e,t,n){var a=new Date,n=(a.setTime(a.getTime()+60*n*1e3),"expires="+a.toUTCString());document.cookie=e+"="+t+";path=/;"+n+";SameSite=Strict"}function GetCookie(e){e=("; "+document.cookie).split("; "+e+"=");if(2==e.length)return e.pop().split(";").shift()}function GetLangRes(e,t){return window.language&&window.language[e]?window.language[e]:(console&&console.log('Missing language-key: "'+e+'":"'+t+'"'),t)}function AddLangRes(e,t){window.language||(window.language=[]),window.language[e]=t}function GetGoogleMapsLink(e,t){var n=numeral(e).format("0.00000[00000]"),a=numeral(t).format("0.00000[00000]");return IsGeoValid(e,t)?"https://maps.google.com/?q="+n+","+a:"javascript:void(0);"}function GetStaticMapUrl(e,t){var n=numeral(e).format("0.00000[00000]"),a=numeral(t).format("0.00000[00000]");return IsGeoValid(e,t)?"https://staticmap.openstreetmap.de/staticmap.php?center="+n+","+a+"&zoom=13&size=100x100&maptype=osma&markers="+n+","+a+",red-pushpin":"/Content/Mashup/Images/EmptyMap.png"}function IsGeoValid(e,t){return null!=e&&null!=t&&!(0===e&&0===t)}function GetDistanceString(e){if(e){var t=e.DistanceMetersExact,e=e.DistanceMetersObfuscated;if(0<t)return FormatExactDistance(t);if(0<=e)return ObfuscatedDistanceStringByNumber(ObfuscatedDistanceByNumber(e))}return""}function ObfuscatedDistanceStringByNumber(e){switch(e){case 150:return"<150m";case 250:return"<250m";case 500:return"<500m";case 1e3:return"<1km";case 5e3:return"<5km";case 1e4:return"<10km";case 25e3:return"<25km";case 5e4:return"<50km";case 1e5:return"<100km";case 1e6:return">100km";case 1e7:return">1000km"}return FormatExactDistance(e)}function ObfuscatedDistanceByNumber(e){var t;switch(e){case 0:t=150;break;case 150:t=250;break;case 250:t=500;break;case 500:t=1e3;break;case 1e3:t=5e3;break;case 5e3:t=1e4;break;case 1e4:t=25e3;break;case 25e3:t=5e4;break;case 5e4:t=1e5;break;case 1e5:t=1e6;break;default:t=1e7}return t}function FormatExactDistance(e){return e<0?"0m":e<1e3?e.toFixed(0)+"m":+(e/1e3).toFixed(1)+"km"}function FormatSpeed(e){return(10<e?Math.floor(e):+e.toFixed(1))+"km/h"}function IsValidDomain(e,t){return/^[a-z0-9]+([\-\.]{1}[a-z0-9]+)*\.[a-z]{2,5}(:[0-9]{1,5})?(\/.*)?$/.test(e)&&e.length<=t}function IsValidUrl(e,t,n){return n?(n=n.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&"),new RegExp("https?://"+n+"([-a-zA-Z0-9@:%_+.~#?&//=]*)").test(e)&&e.length<=t):/https?:\/\/(www\.)?[-a-zA-Z0-9@:%._\+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_\+.~#?&\/\/=]*)/.test(e)&&e.length<=t}function IsValidCommunity(e,t){return/^[a-z0-9\-]+$/.test(e)&&e.length<=t}function ShowPreviewPageLoad(e){e?jQuery("body").addClass("preview-page-load"):jQuery("body").removeClass("preview-page-load")}function ImageErrorHandler(e,t){var n=jQuery(e),a=n.data("lazy-img"),r=n.data("default");a&&""!=a?(setTimeout(function(){n.attr("src",a)},50),n.data("lazy-img",""),n.attr("onerror",'ImageErrorHandler(this, "'+t+'")')):r&&""!=r?(setTimeout(function(){n.attr("src",r)},50),n.data("default",""),n.data("lazy-img",null),n.attr("onerror",'ImageErrorHandler(this, "'+t+'")')):(setTimeout(function(){n.attr("src",t)},50),n.data("default",null),n.data("lazy-img",null),n.attr("onerror",null))}function MasonryStart(){jQuery().masonry&&jQuery(".masonry").masonry({itemSelector:".masonry-item",columnWidth:".masonry-sizer",percentPosition:!0})}function MasonryReload(){jQuery().masonry&&jQuery.each(jQuery(".masonry"),function(e,t){jQuery.data(jQuery(t),"masonry")||MasonryStart(),setTimeout(function(){jQuery(t).masonry("reloadItems"),jQuery(t).masonry("layout")},50)})}void 0!==window.gn_data&&void 0!==window.gn_data.Settings&&null!=window.gn_data.Settings&&jQuery.extend(gnSettings,window.gn_data.Settings),window.MAX_DATE_TIME_TICKS="3155378975999999999",jQuery(function(){window.jQuery&&(jQuery("body").on("click","[data-popup]",function(e){var t=jQuery(this).attr("href");(t=t||jQuery(this).data("src"))&&!jQuery(this).attr("disabled")&&(null!=window.MA_GPSNOSE_IS_MASHUP&&window.MA_GPSNOSE_IS_MASHUP?window.open(t,"_blank"):window.location.href=t),e.preventDefault()}),jQuery("body").on("click","[data-external]",function(e){var t=jQuery(this).attr("href");(t=t&&!t.startsWith("javascript")?t:jQuery(this).data("src"))&&!jQuery(this).attr("disabled")&&window.open(t,"_blank"),e.preventDefault()}),jQuery("[data-remove]").remove(),jQuery(document).ajaxComplete(function(){jQuery("[data-remove]").remove()}),jQuery.fn.popover&&jQuery("[data-popover-img]").popover({trigger:"focus",html:!0,placement:"auto",content:function(){return'<img class="ma-popover-image" src="'+jQuery(this).data("popover-img")+'" />'+(jQuery(this).data("popover-text")?'<p class="text-center">'+jQuery(this).data("popover-text")+"</p>":"")}}))});